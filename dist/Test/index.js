!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";t.a={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}},function(e,t,n){"use strict";var r={C:254,L:1,D:8,N:18,M:18,F:18,B:8},o={string:"C",number:"N",boolean:"L",null:"C"};function i(e){var t={};return e.forEach(function(e){!function(e,t){for(var n in t){var r=void 0!==t[n]&&null!==t[n];(void 0===e[n]||r)&&(e[n]=t[n])}}(t,e)}),function(e){var t={},n=[];for(var i in e)t[i]=null===e[i]?"null":typeof e[i];for(var u in t){var s=o[t[u]];s&&n.push({name:u,type:s,size:r[s]})}return n}(t)}function u(e){return e.reduce(function(e,t){return e+t.size},1)}n.d(t,"b",function(){return i}),n.d(t,"a",function(){return u})},function(module,__webpack_exports__,__webpack_require__){"use strict";var _Shp_Write__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_Dbf_Write__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0);class GeoJson2Shp{constructor(geojson){"string"==typeof geojson&&(geojson=eval("("+geojson+")")),this.geojson_=geojson}writePoint(e){this.write_(_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POINT,e)}writePolyline(e){this.write_(_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POLYLINE,e)}writePolygon(e){this.write_(_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POLYGON,e)}write_(e,t){var n=this.getWriteOptions_(e);n&&Object(_Shp_Write__WEBPACK_IMPORTED_MODULE_0__.a)(n.type,n.geometries,function(e,r){r.dbf=Object(_Dbf_Write__WEBPACK_IMPORTED_MODULE_1__.a)(n.properties),t(e,r)})}getPointOptions(){var e=this.geojson_.features.filter(function(e){return"Point"===e.geometry.type||"MultiPoint"===e.geometry.type});return e&&0!=e.length?{geometries:e.map(this.justCoords_),properties:e.map(this.justProps_),type:_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POINT}:null}getPolylineOptions_(){var e=this.geojson_.features.filter(function(e){return"LineString"===e.geometry.type||"MultiLineString"===e.geometry.type});return e&&0!=e.length?{geometries:e.map(this.justCoords_),properties:e.map(this.justProps_),type:_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POLYLINE}:null}getPolygonOptions_(){var e=this.geojson_.features.filter(function(e){return"Polygon"===e.geometry.type||"MultiPolygon"===e.geometry.type});return e&&0!=e.length?{geometries:e.map(this.justCoords_),properties:e.map(this.justProps_),type:_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POLYGON}:null}getWriteOptions_(e){var t;return e==_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POINT?t=this.getPointOptions():e==_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POLYLINE?t=this.getPolylineOptions_():e==_Shp_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__.a.POLYGON&&(t=this.getPolygonOptions_()),t}justCoords_(e){return"LineString"==e.geometry.type||"MultiLineString"==e.geometry.type?[e.geometry.coordinates]:e.geometry.coordinates}justProps_(e){return e.properties}}__webpack_exports__.a=GeoJson2Shp},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"write",function(){return s}),n.d(r,"extent",function(){return a}),n.d(r,"parts",function(){return _}),n.d(r,"shxLength",function(){return f}),n.d(r,"shpLength",function(){return c});var o={};function i(e,t){return t[0]<e.xmin&&(e.xmin=t[0]),t[0]>e.xmax&&(e.xmax=t[0]),t[1]<e.ymin&&(e.ymin=t[1]),t[1]>e.ymax&&(e.ymax=t[1]),e}function u(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}function s(e,t,n,r){var o=100,i=0,u=0;e.forEach(function(e,t){n.setInt32(i,t),n.setInt32(i+4,10),n.setInt32(i+8,1,!0),n.setFloat64(i+12,e[0],!0),n.setFloat64(i+20,e[1],!0),r.setInt32(u,o/2),r.setInt32(u+4,10),u+=8,i+=28,o+=28})}function a(e){return e.reduce(function(e,t){return i(e,t)},u())}function _(e,t){return e.length}function f(e){return 8*e.length}function c(e){return 28*e.length}n.r(o),n.d(o,"write",function(){return l}),n.d(o,"shpLength",function(){return y}),n.d(o,"shxLength",function(){return h}),n.d(o,"extent",function(){return g}),n.d(o,"parts",function(){return P});var p=n(0);function l(e,t,n,r,o){var s=0,a=0,_=100;e.forEach(function(e,t){var f=d(e),c=P([e],o),p=16*f.length+48+4*(c-1),l=f.reduce(function(e,t){return i(e,t)},u());r.setInt32(a,_/2),r.setInt32(a+4,p/2),a+=8,_+=p+8,n.setInt32(s,t+1),n.setInt32(s+4,p/2),n.setInt32(s+8,o,!0),n.setFloat64(s+12,l.xmin,!0),n.setFloat64(s+20,l.ymin,!0),n.setFloat64(s+28,l.xmax,!0),n.setFloat64(s+36,l.ymax,!0),n.setInt32(s+44,c,!0),n.setInt32(s+48,f.length,!0),n.setInt32(s+52,0,!0);for(var y=e.reduce(function(e,t){return Array.isArray(t[0][0])?e=e.concat(t):e.push(t),e},[]),h=1;h<c;h++)n.setInt32(s+52+4*h,y.reduce(function(e,t,n){return n<h?e+t.length:e},0),!0);f.forEach(function(e,t){n.setFloat64(s+56+16*t+4*(c-1),e[0],!0),n.setFloat64(s+56+16*t+4*(c-1)+8,e[1],!0)}),s+=p+8})}function y(e){return 56*e.length+16*d(e).length}function h(e){return 8*e.length}function g(e){return d(e).reduce(function(e,t){return i(e,t)},u())}function P(e,t){var n=1;return t!==p.a.POLYGON&&t!==p.a.POLYLINE||(n=e.reduce(function(e,t){return e+=t.length,Array.isArray(t[0][0][0])&&(e+=t.reduce(function(e,t){return e+t.length-1},0)),e},0)),n}function d(e,t){return void 0===t&&(t=[]),"object"==typeof e[0][0]?e.reduce(function(e,t){return e.concat(d(t))},t):e}var m={1:r,5:o,3:o};function O(e,t){e.setInt32(0,9994),e.setInt32(28,1e3,!0),e.setInt32(32,t,!0)}function b(e,t){t.setFloat64(36,e.xmin,!0),t.setFloat64(44,e.ymin,!0),t.setFloat64(52,e.xmax,!0),t.setFloat64(60,e.ymax,!0)}t.a=function(e,t,n){var r=e,o=m[r],i=100+4*(o.parts(t,r)-t.length)+o.shpLength(t),u=100+o.shxLength(t),s=new ArrayBuffer(i),a=new DataView(s),_=new ArrayBuffer(u),f=new DataView(_),c=o.extent(t);O(a,r),O(f,r),b(c,a),b(c,f),o.write(t,c,new DataView(s,100),new DataView(_,100),r),a.setInt32(24,i/2),f.setInt32(24,50+4*t.length),n(null,{shp:a,shx:f})}},function(e,t,n){"use strict";function r(e,t,n){for(;e.length<t;)e=n+e;return e}function o(e,t,n){for(;e.length<t;)e+=n;return e}function i(e,t={stream:!1}){if(t.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let n=0;const r=e.length;let o=0,i=Math.max(32,r+(r>>1)+7),u=new Uint8Array(i>>3<<3);for(;n<r;){let t=e.charCodeAt(n++);if(t>=55296&&t<=56319){if(n<r){const r=e.charCodeAt(n);56320==(64512&r)&&(++n,t=((1023&t)<<10)+(1023&r)+65536)}if(t>=55296&&t<=56319)continue}if(o+4>u.length){i+=8,i=(i*=1+n/e.length*2)>>3<<3;const t=new Uint8Array(i);t.set(u),u=t}if(0!=(4294967168&t)){if(0==(4294965248&t))u[o++]=t>>6&31|192;else if(0==(4294901760&t))u[o++]=t>>12&15|224,u[o++]=t>>6&63|128;else{if(0!=(4292870144&t))continue;u[o++]=t>>18&7|240,u[o++]=t>>12&63|128,u[o++]=t>>6&63|128}u[o++]=63&t|128}else u[o++]=t}return u.slice(0,o)}var u=n(1);t.a=function(e,t){var n=t||u.b(e),a=32*n.length+1,_=u.a(n),f=new ArrayBuffer(a+32+_*e.length+1),c=new Date,p=new DataView(f);p.setUint8(0,3),p.setUint8(1,c.getFullYear()-1900),p.setUint8(2,c.getMonth()),p.setUint8(3,c.getDate()),p.setUint32(4,e.length,!0);var l=a+32;p.setUint16(8,l,!0),p.setUint16(10,_,!0),p.setInt8(32+a-1,13),n.forEach(function(e,t){let n=e.name.slice(0,10),r=i(n=o(n,10," "));for(let e=0;e<10;e++)p.setInt8(32+32*t+e,r[e]);p.setInt8(32+32*t+11,e.type.charCodeAt(0)),p.setInt8(32+32*t+16,e.size),"N"==e.type&&p.setInt8(32+32*t+17,3)});var y=a+32;return e.forEach(function(e,t){p.setUint8(y,32),y++,n.forEach(function(t){var n=e[t.name];switch(null!==n&&void 0!==n||(n=""),t.type){case"L":p.setUint8(y,n?84:70),y++;break;case"D":y=s(p,8,r(n.toString(),8," "),y);break;case"N":y=s(p,t.size,r(n.toString(),t.size," ").substr(0,18),y);break;case"C":y=s(p,t.size,o(n.toString(),t.size," "),y);break;default:throw new Error("Unknown field type")}})}),p.setUint8(y,26),p};function s(e,t,n,r){let o=i(n);for(var u=0;u<t;u++)e.setUint8(r,o[u]),r++;return r}},function(e,t,n){"use strict";n.r(t);var r=n(2);window.onload=function(){$("#btnDownLoad").bind("click",function(){var e=new JSZip,t=e.folder("layers");console.log(r.a);var n=new r.a('{"type":"FeatureCollection", "features": [{ "type": "Feature", "geometry": { "type": "Point", "coordinates": [120, 28] }, "properties": { "NAME": "测试点", "aa": "20" } },{ "type": "Feature", "geometry": { "type": "Point", "coordinates": [119.98512455516016, 27.99308422301305] }, "properties": { "NAME": "1", "aa": "21" } },{ "type": "Feature", "geometry": { "type": "Point", "coordinates": [119.98460260972718, 28.00665480427046] }, "properties": { "NAME": "2", "aa": "22" } },{ "type": "Feature", "geometry": { "type": "Point", "coordinates": [120.00809015421116, 28.00926453143535] }, "properties": { "NAME": "3", "aa": "23" } },{ "type": "Feature", "geometry": { "type": "Point", "coordinates": [120.0140925266904, 27.99204033214709] }, "properties": { "NAME": "4", "aa": "24" } },{ "type": "Feature", "geometry": { "type": "Point", "coordinates": [119.99921708185055, 27.981862396204033] }, "properties": { "NAME": "5", "aa": "25" } }]}');n.writePoint(function(e,n){t.file("point.shp",n.shp.buffer,{binary:!0}),t.file("point.shx",n.shx.buffer,{binary:!0}),t.file("point.dbf",n.dbf.buffer,{binary:!0})}.bind(this)),n.writePolyline(function(e,n){t.file("polyline.shp",n.shp.buffer,{binary:!0}),t.file("polyline.shx",n.shx.buffer,{binary:!0}),t.file("polyline.dbf",n.dbf.buffer,{binary:!0})}.bind(this)),n.writePolygon(function(e,n){t.file("polygon.shp",n.shp.buffer,{binary:!0}),t.file("polygon.shx",n.shx.buffer,{binary:!0}),t.file("polygon.dbf",n.dbf.buffer,{binary:!0})}.bind(this));e.generateAsync({type:"blob"}).then(function(e){saveAs(e,"example.zip")})})}}]);
//# sourceMappingURL=index.js.map