{"version":3,"file":"Field.js","sources":["../../../src/GeoJson2Shp/Dbf/Field.js"],"sourcesContent":["﻿/**\r\n * @module GeoJson2Shp/Dbf/Field\r\n */\r\n\r\nimport FieldSize from './FieldSize.js'\r\nimport FieldType from './FieldType.js'\r\n\r\n/**\r\n * @typedef {Object} Field\r\n * @property {string} Field.name 字段名称\r\n * @property {module:GeoJson2Shp/Dbf/FieldType} Field.type 字段类型\r\n * @property {number} Field.size 字段大小\r\n * \r\n */\r\n\r\n/**\r\n * 属性数组所有字段定义\r\n * @param {Array.<Object>} features 属性数组\r\n * @return {Array.<module:GeoJson2Shp/Dbf/Field~Field>} 属性数组所有字段定义\r\n * \r\n * @example \r\n * var features=[{\"NAME\":\"测试点\",\"aa\":\"20\"},{\"NAME\":\"1\",\"aa\":\"21\"},{\"NAME\":\"2\",\"aa\":\"22\"},{\"NAME\":\"3\",\"aa\":\"23\"},{\"NAME\":\"4\",\"aa\":\"24\"},{\"NAME\":\"5\",\"aa\":\"25\"}];\r\n * multi(features)\r\n * //结果:[{\"name\":\"NAME\",\"type\":\"C\",\"size\":254},{\"name\":\"aa\",\"type\":\"C\",\"size\":254}]\r\n */\r\nexport function multi(features) {\r\n    var fields = {};\r\n\r\n    //合并属性对象对象\r\n    features.forEach(collect);\r\n    function collect(f) { inherit(fields, f); }\r\n\r\n    return obj(fields);\r\n}\r\n\r\n/**\r\n * 合并对象a,b,类似jquery的extend\r\n * @param {Object} a\r\n * @param {Object} b\r\n * @returns {Object} 合并后的对象\r\n * \r\n * @example \r\n * var a={\"T\":\"\"};\r\n * var b={\"NAME\":\"测试点\",\"aa\":\"20\"};\r\n * inherit(a,b)\r\n * //结果:{\"T\":\"\",\"NAME\":\"测试点\",\"aa\":\"20\"}\r\n */\r\nexport function inherit(a, b) {\r\n    for (var i in b) {\r\n        var isDef = typeof b[i] !== 'undefined' && b[i] !== null;\r\n        if (typeof a[i] === 'undefined' || isDef) {\r\n            a[i] = b[i];\r\n        }\r\n    }\r\n    return a;\r\n}\r\n\r\n/**\r\n * 属性对象转为字段定义\r\n * @param {Object} _ 属性对象\r\n * @return {Array.<module:GeoJson2Shp/Dbf/Field~Field>} 字段定义\r\n */\r\nexport function obj(_) {\r\n    var fields = {}, o = [];\r\n    for (var p in _) fields[p] = _[p] === null ? 'null' : typeof _[p];\r\n    for (var n in fields) {\r\n        var t = FieldType[fields[n]];\r\n        if (t) {\r\n            o.push({\r\n                name: n,   //字段名称\r\n                type: t,   //字段类型\r\n                size: FieldSize[t]  //字段大小\r\n            });\r\n        }\r\n    }\r\n    return o;\r\n}\r\n\r\n\r\n\r\nexport default undefined;\r\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAO,SAAS,MAAM,gBAAgB;AACtC,OAAO,SAAS,MAAM,gBAAgB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAAS,KAAK,CAAC,QAAQ,EAAE;AAChC,IAAI,IAAI,MAAM,GAAG,EAAE,CAAC;AACpB;AACA;AACA,IAAI,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AAC9B,IAAI,SAAS,OAAO,CAAC,CAAC,EAAE,EAAE,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE;AAC/C;AACA,IAAI,OAAO,GAAG,CAAC,MAAM,CAAC,CAAC;AACvB,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAAS,OAAO,CAAC,CAAC,EAAE,CAAC,EAAE;AAC9B,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE;AACrB,QAAQ,IAAI,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,WAAW,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC;AACjE,QAAQ,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,WAAW,IAAI,KAAK,EAAE;AAClD,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB,SAAS;AACT,KAAK;AACL,IAAI,OAAO,CAAC,CAAC;AACb,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAAS,GAAG,CAAC,CAAC,EAAE;AACvB,IAAI,IAAI,MAAM,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,CAAC;AAC5B,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,IAAE,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,GAAG,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAC;AACtE,IAAI,KAAK,IAAI,CAAC,IAAI,MAAM,EAAE;AAC1B,QAAQ,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACrC,QAAQ,IAAI,CAAC,EAAE;AACf,YAAY,CAAC,CAAC,IAAI,CAAC;AACnB,gBAAgB,IAAI,EAAE,CAAC;AACvB,gBAAgB,IAAI,EAAE,CAAC;AACvB,gBAAgB,IAAI,EAAE,SAAS,CAAC,CAAC,CAAC;AAClC,aAAa,CAAC,CAAC;AACf,SAAS;AACT,KAAK;AACL,IAAI,OAAO,CAAC,CAAC;AACb,CAAC;AACD;AACA;AACA;AACA,eAAe,SAAS,CAAC;"}